<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v6.js"></script>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Community Data Sampling</title>
  
  <link rel="stylesheet" href="style/style.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@5/turf.min.js"></script>

</head>
<body>

  

  <div class="container-fluid">

    <!-- top of page title here -->
   <div class="row" id="header"><h1>St. Louis Public Library Data Hub</h1></div>
    <!-- top of page title here -->
    
    <ul class="nav nav-tabs" role="tablist">
      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#intro" role="tab">Intro</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#baden" role="tab">Baden</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#barr" role="tab">Barr</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#buder" role="tab">Buder</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#cabanne" role="tab">Cabanne</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#carondelet" role="tab">Carondelet</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#carpenter" role="tab">Carpenter</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#central-express" role="tab">Central Express</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#central" role="tab">Central</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#charing-cross" role="tab">Charing Cross</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#divoll" role="tab">Divoll</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#julia-davis" role="tab">Julia Davis</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#kingshighway" role="tab">Kingshighway</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#machacek" role="tab">Machacek</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#marketplace" role="tab">Marketplace</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#schlafly" role="tab">Schlafly</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#walnut-park" role="tab">Walnut Park</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#regional-data" role="tab">Download Regional Data</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#data-sources" role="tab">Project Documentation</a>
      </li>

      <!-- <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#st-louis" role="tab">St. Louis</a>
      </li> -->


    </ul><!-- Tab panes -->
      <div class="tab-content">

        <div class="tab-pane" id="intro" role="tabpanel">

          <br><h1 id="intro-header">Introduction</h1>
          <p>This tool is intended for use to St. Louis Public Library employees to better understand the communities they serve. Development of this project took place from September 2021 through May 2022. Data analysis and development was led by Emma Baker (emma.baker@wustl.edu) and work was overseen by Joe Monahan. Any questions about the scope of this project or bugs can be directed to jmonahan@slpl.org.           </p>
          
          <div id="map-container">
          <div id="race-map"></div>
          <div id="legend"></div>

          <div id="map-checkbox">
            <h4>Select layer:</h4>
            <!-- <input type="checkbox" id="race" name="race" value="Race"> -->
            <input type="radio" id="race" name="map-selector" value="Race">
            <label for="race"> Race/Ethnicity</label><br>
            <div id="race-subselectors"></div>
            <!-- <input type="checkbox" id="education" name="education" value="Education"> -->
            <input type="radio" id="education" name="map-selector" value="Education">
            <label for="education">Education</label><br>
            <div id="education-subselectors"></div>
            <!-- <input type="checkbox" id="age" name="age" value="Age"> -->
            <input type="radio" id="age" name="map-selector" value="Age">
            <label for="age">Age</label><br>
            <div id="age-subselectors"></div>
            <!-- <input type="checkbox" id="income" name="income" value="Income"> -->
            <input type="radio" id="income" name="map-selector" value="Income">
            <label for="income">Income</label><br>
            <div id="income-subselectors"></div>
            <input type="radio" id="language" name="map-selector" value="Language">
            <label for="language">Language</label><br>
            <div id="language-subselectors"></div>
            <button class="btn btn-secondary" id="clear">Clear Selections</button><br>

          </div>
        </div>
        <div id="intro-text">
          <!-- <h3>Data Sources</h3> -->
          <!-- <ul>
            <li>Population and Age Data:
              <ul>
                <li><u>Table name:</u> S0101: Age and Sex</li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>
            </li>
            <li>Racial Composition Data:
              <ul>
                <li><u>Table name:</u> P1: Race</li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>

            </li>
            <li>Ethnicity Data:
              <ul>
                <li><u>Table name:</u> P2: Hispanic or Latino, and Not Hispanic or Latino by Race </li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>

            </li>

            <li>Educational Attainment Data:
              <ul>
                <li><u>Table name:</u>S1501: Educational Attainment </li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>
            </li>
            <li>Median Income Data:
              <ul>
                <li><u>Table name:</u> S1903: Median Income in the Past 12 Months (inflation-adjusted dollars)</li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>
            </li>
            <li>Poverty Status Data:
              <ul>
                <li><u>Table name:</u>Poverty Status in the Past 12 Months</li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>
            </li>
            <li>Labor Force Data:
              <ul>
                <li><u>Table name:</u>S2301: Employment Status</li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>
            </li>
            <li>Language Data:
              <ul>
                <li><u>Table name:</u>S1601: Language Spoken at Home </li>
                <li><u>Data Level:</u>  St. Louis City, Missouri </li>
              </ul>

            </li>
            <li>Transportation and Commute Data:
              <ul>
                <li><u>Table name:</u>C08301: Means of Transportation to Work </li>
                <li><u>Data Level:</u>  St. Louis City, Missouri </li>
              </ul>

            </li>

          </ul> -->


          

          
          </div>

          
        </div>

        <div class="tab-pane" id="baden" role="tabpanel">
          <!-- <p>Baden Library</p> -->
          <div class = "viz-structure" id="viz-wrapper">
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
              <!-- <li class="nav-item">
                <a class="nav-link show active" id="pills-introduction-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Introduction</a>
              </li> -->
              <li class="nav-item">
                <a class="nav-link show active" id="pills-race-tab" data-toggle="pill" href="#pills-race" role="tab" aria-controls="pills-profile" aria-selected="false">Race</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="pills-education-tab" data-toggle="pill" href="#pills-education" role="tab" aria-controls="pills-contact" aria-selected="false">Educational Attainment</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="pills-age-tab" data-toggle="pill" href="#pills-age" role="tab" aria-controls="pills-profile" aria-selected="false">Age</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="pills-poverty-tab" data-toggle="pill" href="#pills-poverty" role="tab" aria-controls="pills-contact" aria-selected="false">Poverty</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="pills-data-tab" data-toggle="pill" href="#pills-data" role="tab" aria-controls="pills-contact" aria-selected="false">Download Data</a>
              </li>
            </ul>
            <div class="tab-content" id="pills-tabContent">
              <!-- <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-introduction-tab">
              </div> -->

              <div class="tab-pane fade" id="pills-data" role="tabpanel" aria-labelledby="pills-data-tab">
                <h1>Data sources:</h1>
                <button class="btn btn-secondary" id="download-2010-data">Download 2010 data</button>
                <br>
                <br>
                <button class="btn btn-secondary" id="download-2019-data">Download 2019 data</button>
              </div> 

              <div class="tab-pane fade show active" id="pills-race" role="tabpanel" aria-labelledby="pills-race-tab">
                <div id="comparison">
                    <p>Compare this data to:</p>
                    <div id="compare-to-MO-tick-box">
                      <input type="checkbox" id="state-race" class="race-tickbox">
                      <label for="scales">The state of Missouri</label>
                    </div>
                    <div id="compare-to-STL-tick-box" class="race-tickbox" style="margin-bottom: 30px;">
                      <input type="checkbox" id="city-race">
                      <label for="scales">St. Louis City</label>
                    </div>
                </div> 
               
                <!-- Race  -->
                <div id="race-viz"></div>
                <!-- <button id='race' onclick="save(this.id)">Export this chart to PNG</button> -->
                <!-- <div id="race-tree-2010"></div>
                <button id='race-tree-2010' onclick="save(this.id)">Export this chart to PNG</button>
                <div id="race-tree-2020"></div>
                <button id='race-tree-2020' onclick="save(this.id)">Export this chart to PNG</button> -->



              </div>
              <div class="tab-pane fade" id="pills-education" role="tabpanel" aria-labelledby="pills-education-tab">
                <div id="comparison">
                  <p>Compare this data to:</p>
                  <div id="compare-to-MO-tick-box">
                    <input type="checkbox" id="state-education">
                    <label for="scales">The state of Missouri</label>
                  </div>
                  <div id="compare-to-STL-tick-box" style="margin-bottom: 30px;">
                    <input type="checkbox" id="city-education">
                    <label for="scales">St. Louis City</label>
                  </div>
                </div> 
                
                <!-- Educational Attainment  -->
                <div id="education-block">
                  <div id="educationData2010" style="transform: scale(1.25)">
                    <div class="vstack gap-2" style="margin-right: 150px;">
                      <h3 class = "education-text" id = "collegeOrHigher2010Text">2010</h3><br>
                      <div id="education2010"></div>
                      <!-- <button id='education2010' onclick="save(this.id)">Export this chart to PNG</button> -->
                    </div>
                    <div class="vstack gap-2">
                      <h3 class = "education-text" id = "collegeOrHigher2010Text">2019</h3><br>
                      <div id="education2020"></div>
                      <!-- <button id='education2020' onclick="save(this.id)">Export this chart to PNG</button> -->
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="pills-age" role="tabpanel" aria-labelledby="pills-age-tab">
                
                <div id="comparison">
                  <p>Compare this data to:</p>
                  <div id="compare-to-MO-tick-box">
                    <input type="checkbox" id="state-age">
                    <label for="scales">The state of Missouri</label>
                  </div>
                  <div id="compare-to-STL-tick-box" style="margin-bottom: 30px;">
                    <input type="checkbox" id="city-age">
                    <label for="scales">St. Louis City</label>
                  </div>
                </div> 
                <!-- Age  -->
                <div id="age-block">
                  <div id="age2010">
                    <!-- <img src="data/age_svgs/baden.svg" width="500" height="600"> -->
                  </div>
                  <div id="age2020"></div>
                  <!-- <button id='age2020' onclick="save(this.id)">Export this chart to PNG</button> -->
                  <!-- <button id='age2010' onclick="save(this.id)">Export this chart to PNG</button> -->
                </div>
              </div>

              <div class="tab-pane fade" id="pills-poverty" role="tabpanel" aria-labelledby="pills-poverty-tab">
                <div id="comparison">
                  <p>Compare this data to:</p>
                  <div id="compare-to-MO-tick-box">
                    <input type="checkbox" id="state-poverty">
                    <label for="scales">The state of Missouri</label>
                  </div>
                  <div id="compare-to-STL-tick-box" style="margin-bottom: 30px;">
                    <input type="checkbox" id="city-poverty">
                    <label for="scales">St. Louis City</label>
                  </div>
                </div> 
                
                <!-- Poverty  -->
                <div id="poverty-block">
                  <div class="vstack gap-3" id="povertyBlock2010">
                    <h3>2010</h3>
                    <div id="poverty2010"></div>
                    <!-- <button id='poverty2010' onclick="save(this.id)">Export this chart to PNG</button> -->
                    <!-- <p>2010 Poverty Line: $X,XXX; plus $X,XXX per additional person in household</p> -->
                  </div>
                  <div class="vstack gap-3" id="povertyBlock2019">
                    <h3>2019</h3>
                    <div id="poverty2020"></div>
                    <!-- <button id='poverty2020' onclick="save(this.id)">Export this chart to PNG</button> -->
                    <!-- <p>2019 Poverty Line: $X,XXX; plus $X,XXX per additional person in household</p> -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane" id="barr" role="tabpanel">
          <!-- <p>Barr Library</p> -->

        </div>
        <div class="tab-pane" id="buder" role="tabpanel">
          <!-- <p>Buder Library</p> -->
        </div>

        <div class="tab-pane" id="cabanne" role="tabpanel">
          <!-- <p>Cabanne Library</p> -->
        </div>

        <div class="tab-pane" id="carondelet" role="tabpanel">
          <!-- <p>Carondelet Library</p> -->
        </div>

        <div class="tab-pane" id="carpenter" role="tabpanel">
          <!-- <p>Carpenter Library</p> -->
        </div>

        <div class="tab-pane" id="central-express" role="tabpanel">
          <!-- <p>Central Express Library</p> -->
        </div>

        <div class="tab-pane" id="central" role="tabpanel">
          <!-- <p>Carondelet Library</p> -->
        </div>

        <div class="tab-pane" id="charing-cross" role="tabpanel">
          <!-- <p>Charing Cross Library</p> -->
        </div>

        <div class="tab-pane" id="divoll" role="tabpanel">
          <!-- <p>Divoll Library</p> -->
        </div>

        <div class="tab-pane" id="julia-davis" role="tabpanel">
          <!-- <p>Julia Davis Library</p> -->
        </div>

        <div class="tab-pane" id="kingshighway" role="tabpanel">
          <!-- <p>Kingshighway Library</p> -->
        </div>

        <div class="tab-pane" id="machacek" role="tabpanel">
          <!-- <p>Machacek Library</p> -->
        </div>

        <div class="tab-pane" id="marketplace" role="tabpanel">
          <!-- <p>Marketplace Library</p> -->
        </div>

        <div class="tab-pane" id="schlafly" role="tabpanel">
          <!-- <p>schlafley Library</p> -->
        </div>

        <div class="tab-pane" id="walnut-park" role="tabpanel">
          <!-- <p>Walnut Park Library</p> -->
        </div>

        <div class="tab-pane" id="regional-data" role="tabpanel">
          <div id = "regional-data-content"></div>
        </div>

        <div class="tab-pane" id="st-louis" role="tabpanel">
        </div>
        <div class="tab-pane" id="data-sources" role="tabpanel">

          <br><h1>Project Documentation</h1>

          <p>This is a Node.js project. Layout was templatized with Bootstrap and all visualizations were made with d3.js. Additionally, the interactive map was made using Leaflet. The source code for this project is found <a href="https://github.com/emlorraine/community_data">here</a>.</p>

          <p>Data for this project is from the Census Bureau's 5-year estimates from the American Community Survey for 2010 and 2019. Racial composition data was derived from the Decennial Census for 2010 and 2020. Information on the American Community Survey and data collection methods are found <a href="https://www.census.gov/programs-surveys/acs">here</a>.</p>
          <i>Note: 5-year census estimates for 2020 were unavailable until April 2022 due to data collection delays related to the COVID-19 pandemic.</i>
          <p>All data for the map and visualizations are derived from these tables:</p>


          <ul>
            <li>Population and Age Data:
              <ul>
                <li><u>Table name:</u> S0101: Age and Sex</li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>
            </li>
            <li>Racial Composition Data:
              <ul>
                <li><u>Table name:</u> P1: Race</li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>

            </li>
            <li>Ethnicity Data:
              <ul>
                <li><u>Table name:</u> P2: Hispanic or Latino, and Not Hispanic or Latino by Race </li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>

            </li>

            <li>Educational Attainment Data:
              <ul>
                <li><u>Table name:</u> S1501: Educational Attainment </li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>
            </li>
            <li>Median Income Data:
              <ul>
                <li><u>Table name:</u> S1903: Median Income in the Past 12 Months (inflation-adjusted dollars)</li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>
            </li>
            <li>Poverty Status Data:
              <ul>
                <li><u>Table name:</u>Poverty Status in the Past 12 Months</li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>
            </li>
            <li>Labor Force Data:
              <ul>
                <li><u>Table name:</u> S2301: Employment Status</li>
                <li><u>Data Level:</u> Census tracts </li>
              </ul>
            </li>
            <li>Language Data:
              <ul>
                <li><u>Table name:</u> S1601: Language Spoken at Home </li>
                <li><u>Data Level:</u>  St. Louis City, Missouri </li>
              </ul>

            </li>
            <li>Transportation and Commute Data:
              <ul>
                <li><u>Table name:</u> C08301: Means of Transportation to Work </li>
                <li><u>Data Level:</u>  St. Louis City, Missouri </li>
              </ul>
            </li>
            <li>Technology Data:
              <ul>
                <li><u>Table name:</u> S2801: Types of Computers and Internet </li>
                <li><u>Data Level:</u>  St. Louis City, Missouri </li>
              </ul>
            </li>
          </ul>
        </div>

        <div class="tab-pane" id="transportation" role="tabpanel">
          <p>Transportation</p>
          <div id = "transportation-2010"></div>
          <!-- <button id='transportation-2010' onclick="save(this.id)">Export this chart to PNG</button> -->

          <!-- <div id = "transportation-2019"></div> -->
          <!-- <button id='transportation-2019' onclick="save(this.id)">Export this chart to PNG</button> -->

        </div>
    </div>

  </div>

  <!-- Load data, create visualizations -->

  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="crossorigin=""></script>

  <script src="js/maps/map.js"></script>
 
  <script src="saveSvgAsPng.js"></script>
  <script type="module" src="./node_modules/save-svg-as-png/lib/saveSvgAsPng.js"></script>

  <script>
    function save(chartName){
      var fileName = chartName + ".png"
      var element = chartName.charAt(0).toLowerCase() + chartName.slice(1);
      var chart = document.getElementById(element).getElementsByTagName('svg')[0];
      saveSvgAsPng(chart, fileName);
    }
  </script>
  
  <script src="js/transportation.js"></script>

  <script src="js/load.js"></script>

  <script src="js/age/age.js"></script>
  <script src="js/age/age-city.js"></script>
  <script src="js/age/age-state.js"></script>

  <script src="js/race/race.js"></script>
  <script src="js/race/race-city.js"></script>
  <script src="js/race/race-state.js"></script> 

  <script src="js/education/education.js"></script>
  <script src="js/education/education-city.js"></script>
  <script src="js/education/education-state.js"></script>

  <script src="js/poverty/poverty.js"></script>
  <script src="js/poverty/poverty-city.js"></script>
  <script src="js/poverty/poverty-state.js"></script>



</body>
</html>